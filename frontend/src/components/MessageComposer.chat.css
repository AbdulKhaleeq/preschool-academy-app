/* MessageComposer.chat.css - updated and mobile-focused */
:root{
  --bg: #fafafa;
  --panel: #ffffff;
  --muted: #6b7280;
  --accent1: #8b5cf6;
  --accent2: #06b6d4;
  --success1: #10b981;
  --border: #e5e7eb;
  --bubble-sent: linear-gradient(135deg, var(--accent1) 0%, var(--accent2) 100%);
  --bubble-recv: #f3f4f6;
}

/* base */
*{box-sizing:border-box;font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
html,body,#root{height:100%;}

/* container */
.mc-container{
  display:flex;
  height: calc(100vh - 120px);
  background: linear-gradient(180deg,#fff,#f8fafc);
  gap: 16px;
  padding: 8px;
}

/* SIDEBAR */
.mc-sidebar{
  width:300px;
  background:var(--panel);
  border-right:1px solid var(--border);
  display:flex;
  flex-direction:column;
  overflow:hidden;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.03);
}
.mc-recipient-select{padding:14px;border-bottom:1px solid var(--border); background:var(--panel);}
.mc-recipient-select label{display:block;font-size:0.85rem;color:var(--muted);margin-bottom:8px;}
.mc-recipient-select select{
  width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);background:#fff;font-size:0.95rem;
}

/* contacts list */
.mc-contacts{overflow:auto;padding:8px;display:flex;flex-direction:column;gap:6px;}
.contact-row{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:transparent;border:0;cursor:pointer;text-align:left;}
.contact-row:hover{background:#f8fafc;}
.contact-row.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;}
.contact-avatar{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;background:linear-gradient(135deg,#f59e0b,#ef4444);color:white;}
.contact-info{flex:1;min-width:0;}
.contact-name{font-weight:600;font-size:0.95rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
.contact-sub{font-size:0.8rem;color:var(--muted);}

/* MAIN PANEL */
.mc-main{flex:1;display:flex;flex-direction:column;border-radius:12px;overflow:hidden;background:transparent;min-width:0;}
.mc-header{background:linear-gradient(135deg,var(--accent1),var(--accent2));color:white;padding:14px 16px;border-radius:10px;}
.mc-header h3{margin:0;font-size:1.05rem;}
.header-sub{font-size:0.85rem;opacity:0.9;margin-top:6px}

/* small horizontal divider (the red-line spot you wanted) */
.mc-divider {
  height: 8px;
  width: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(0,0,0,0) 50%);
  margin: 8px 0;
}

/* message list */
.mc-message-list{
  flex:1;
  overflow:auto;
  padding:18px 18px 18px 18px;
  display:flex;
  flex-direction:column;
  gap:10px;
  background:linear-gradient(180deg,#fff,#fafafb);
}

/* message bubble layout */
.message-bubble{
  display:flex;
  align-items:flex-end;
  gap:10px;
  margin: 6px 0;
  max-width: 88%;
  word-break: break-word;
}

/* avatar */
.message-bubble .bubble-avatar{
  width:36px;
  height:36px;
  font-size:0.9rem;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  background:linear-gradient(135deg,#f59e0b,#ef4444);
  color:white;
  flex-shrink:0;
}

/* bubble body */
.message-bubble .bubble-body{
  background:var(--bubble-recv);
  padding:8px 10px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,0.04);
  flex:1;
  min-width:0;
}

/* sent vs received */
.message-bubble.sent{
  align-self:flex-end;
  flex-direction:row-reverse;
  margin-left: 20px; /* separate from left column */
}
.message-bubble.received{
  align-self:flex-start;
  margin-right: 20px; /* separate from right column */
}

.message-bubble.sent .bubble-body{
  background:var(--bubble-sent);
  color:white;
  box-shadow:0 6px 18px rgba(139,92,246,0.18);
}

/* bubble meta */
.bubble-meta {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin-bottom:6px;
  flex-wrap:nowrap;
}
.meta-left { display:flex; align-items:center; gap:8px; min-width:0; overflow:hidden; }
.meta-sender { font-weight:700; font-size:0.86rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.meta-context { font-size:0.72rem; opacity:0.9; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; padding:2px 6px; border-radius:8px; background: rgba(255,255,255,0.08); }
.meta-time { font-size:0.68rem; opacity:0.8; white-space:nowrap; margin-left:8px; }

/* text */
.bubble-text{
  font-size:0.96rem;
  line-height:1.25;
  white-space:pre-wrap;
  word-break:break-word;
}

/* status & sending state */
.bubble-status{font-size:0.75rem;opacity:0.85;margin-top:6px;text-align:right;font-weight:600;}
.message-bubble.sending{opacity:0.85;}

/* composer */
.mc-composer{
  border-top:1px solid var(--border);
  padding:12px;
  background:var(--panel);
  position:sticky;
  bottom:0;
}
.composer-row{display:flex;gap:8px;align-items:flex-end;}
.composer-textarea{
  flex:1;
  min-height:40px;
  max-height:160px;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid var(--border);
  resize:none;
  font-size:0.95rem;
  background:#f9fafb;
  overflow:auto;
}
.composer-send{
  width:48px;height:48px;border-radius:12px;border:0;background:linear-gradient(135deg,var(--success1),#059669);color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.composer-send:disabled{opacity:0.4;cursor:not-allowed;}
.composer-error{color:#b91c1c;padding:8px 0;font-size:0.9rem;}

/* empty and loading rows */
.empty-row{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:var(--muted);text-align:center;}
.empty-emoji{font-size:2.5rem;margin-bottom:8px;}
.loading-row, .error-row{padding:18px;text-align:center;color:var(--muted);}

/* mobile responsive */
@media (max-width: 768px){
  .mc-container{flex-direction:column;height:100vh;padding:8px;margin:0;border-radius:0;}
  .mc-sidebar{width:100%;height:auto;border-right:0;border-radius:8px;box-shadow:none;margin-bottom:8px;}
  .mc-main{flex:1;min-height:0;}
  /* ensure enough bottom padding so last message is visible above composer */
  .mc-message-list{padding: 12px 12px 200px 12px;}
  .mc-composer {
    position: fixed;
    left: 8px;
    right: 8px;
    bottom: 12px;
    padding: 10px;
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
    max-height: 240px;
    z-index: 999;
  }
  .mc-header { padding: 10px 12px; border-radius: 10px; margin: 0 0 8px 0; }
  .mc-header h3{ font-size: 1rem; margin-bottom:4px;}
  .header-sub{font-size:0.8rem; opacity:0.95;}
  .contact-row{padding:12px;}
  .composer-textarea { max-height: 140px; overflow:auto; padding:8px 10px; }
  .message-bubble { max-width: 86%; }
  /* slightly stagger alternating bubbles for nicer feel */
  .mc-message-list .message-bubble:nth-child(odd) { transform: translateX(0); }
  .mc-message-list .message-bubble:nth-child(even) { transform: translateX(0); }
}

/* final small overrides (keeps everything compact) */
.message-bubble .bubble-body { padding:8px 10px; border-radius:12px; }
.message-bubble.sent .bubble-body { border-radius:12px 12px 12px 6px; }
.message-bubble.received .bubble-body { border-radius:12px 12px 6px 12px; }
.composer-send { border-radius:50%; width:44px; height:44px; display:flex; align-items:center; justify-content:center; padding:0; }
.composer-send svg { transform: rotate(45deg); }
